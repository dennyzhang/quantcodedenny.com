#+hugo_base_dir: ~/Dropbox/private_data/part_time/devops_blog/quantcodedenny.com
#+language: en
#+AUTHOR: dennyzhang
#+HUGO_TAGS: trading-llm
#+TAGS: Important(i) noexport(n)
#+SEQ_TODO: TODO HALF ASSIGN | DONE CANCELED BYPASS DELEGATE DEFERRED
* Improve Trading Quality With AI
:PROPERTIES:
:EXPORT_FILE_NAME: llm-trade-common-scenarios
:EXPORT_DATE: 2025-10-12
:END:
URL: https://quantcodedenny.com/posts/llm-trade-common-scenarios/

Use AI to plan smarter trading decisions — systematically, calmly, and without emotional bias.

This post shows structured prompts to improve weekly options strategies, day trading checks, and long-term signal monitoring.
- /cashsecuredput Plan a weekly cash-secured put on RKLB with strikes balancing premium and assignment risk
- /coveredcall Plan a weekly covered call on RKLB with strikes minimizing assignment risk
- /guardrail I plan to buy QQQ at $550
- /tradeanalysis MSFT dip this week / Day trading QQQ today
- /earlyalerts Reddit in tech/social sector
** Commands & Workflows
*** /coveredcall → Weekly Covered Call Planning
Plan a weekly covered call to generate income while controlling assignment risk.

Example prompt:
#+begin_example
/coveredcall Plan a weekly covered call on RKLB with strikes minimizing assignment risk
#+end_example

LLM checklist:
- Recommend strike above current market price based on volatility and chart resistance.
- Estimate probability of being called and premium yield.
- Suggest rolling/exit triggers if price approaches strike.
- Confirm rationale aligns with holding vs. selling preference.

Quick Decision Checklist:
- [ ] Stock not in breakout mode.
- [ ] IV rank > 25% (higher IV = higher premium).
- [ ] Strike 5–10% above current price for low assignment risk.
- [ ] Weekly premium > 0.8% of stock price if possible.
- [ ] Defined plan for rolling or accepting assignment.
*** /cashsecuredput → Weekly Cash-Secured Put Planning
Plan a weekly cash-secured put to accumulate shares at a discount while collecting premium.

Example prompt:
#+begin_example
/cashsecuredput Plan a weekly cash-secured put on RKLB with strikes balancing premium and assignment risk
#+end_example

LLM checklist:
- Suggest strike & expiry balancing yield and assignment probability.
- Estimate premium and probability of assignment.
- Flag event risk (earnings, tariffs, large announcements).
- Remind of capital lockup and required cash to cover assignment.

Quick Decision Checklist:
- [ ] Stock stable or in uptrend.
- [ ] IV rank > 30% (prefer higher IV for better premium).
- [ ] Strike 5–10% below current price.
- [ ] Target 0.8–1.5% weekly ROI (adjust to risk tolerance).
- [ ] No major event risk this week.
*** /earlyalerts → Emerging Signals (6-month horizon)
Scan for early signals in companies/sectors using hiring, patents, filings, and fund flows.

Example prompt:
#+begin_example
/earlyalerts Analyze early signals for Reddit in tech/social sector
#+end_example

LLM checklist:
- Synthesize signals: hiring spikes, patent filings, executive hires, fund inflows.
- Estimate confidence level and suggested monitoring cadence.
- Suggest concrete next steps: filings to watch, KPIs (DAU, revenue indicators).

Quick Decision Checklist:
- [ ] Multiple independent signals (news + hiring + filings).
- [ ] No single-source hype (avoid false positives).
- [ ] Monitoring plan: what to check weekly/monthly.
*** /guardrail → Emotional & Purchase Check (Always run before trades)
Check for FOMO/panic and validate trade reasonableness.

Example prompt:
#+begin_example
/guardrail I want to buy QQQ at $550
#+end_example

LLM output structure:
- Assessment: ✅ (neutral) / ⚠️ (emotional)
- Buy? / Execute?: Yes / No
- Confidence: 0–100%
- Reasoning: Market context, catalysts, volatility, risk factors
- Suggested Price / Execution Adjustments
- Quick Habit: If flagged ⚠️, wait 24 hours or reduce order size / split execution.

Mini Checklist:
- [ ] Is this trade plan-based or reactionary?
- [ ] Are technical or fundamental reasons documented?
- [ ] Is position sizing aligned with risk rules?
*** /tradeanalysis → Dips & Intraday Opportunities
Identify short-term dip buys or intraday setups (QQQ, sector ETFs, or leaders).

Example prompt:
#+begin_example
/tradeanalysis MSFT dip this week
/tradeanalysis Day trading QQQ today
#+end_example

LLM checklist:
- Confirm dip depth vs. recent ranges (5–10% typical dip band).
- Check volume, VWAP, and liquidity for execution feasibility.
- Provide suggested entry range, stop-loss, and profit target.
- Note market-open / close behavior or news events that affect intraday flow.

Quick Decision Checklist:
- [ ] Volume supports the move (no thin liquidity).
- [ ] Entry near support/VWAP with stop below clear level.
- [ ] Reward:risk meets minimum threshold (e.g., 2:1).
- [ ] No conflicting macro/news in the session.
** Weekly & Daily Routine
- Monday: Run `/cashsecuredput` to plan cash-secured puts for the week.
- Thursday/Friday: Run `/coveredcall` to harvest premium if holding shares.
- Daily before trading: Run `/guardrail` for any planned trades; run `/tradeanalysis` for intraday opportunities.
- Weekly: Run `/earlyalerts` to refresh long-term watchlist and re-prioritize ideas.
- Logging: Record rationale, strikes, premiums, outcomes in a simple weekly journal.
** Reflection Prompts (Weekly)
- Did AI help me avoid emotional trades this week?
- Were strike selections consistent with my risk profile?
- What trade(s) deviated from plan and why?
** Universal Rules
- **Tone:** Calm, rational, focused on long-term value.
- **Basis:** Verifiable facts (current prices, historical trends, news).
- **Key Insights:** Include reusable patterns or indicators in each output.
- **No Financial Advice:** Outputs are analytical tools for consideration only.
- **Output Discipline:** Follow each workflow to reinforce habit and consistency.
- Use first-person framing: “I will check /guardrail before executing a trade.”
** Common Pitfalls
- Selling puts on clear downtrends without a trend-reversal thesis.
- Writing calls too close to resistance when you want to keep the stock.
- Ignoring assignment cash requirements for cash-secured puts.
- Trading through major events (earnings, tariffs) without adjustments.
** Key Takeaway
AI enforces structured thinking and consistent habits. Use the commands to run repeatable checks, document decisions, and improve trading quality over time.
* Check Stock Sentiment With AI
:PROPERTIES:
:EXPORT_FILE_NAME: llm-stock-sentiment
:EXPORT_DATE: 2025-08-25
:END:
URL: https://quantcodedenny.com/posts/llm-stock-sentiment/
** 0 Intro
This tool empowers engineers to automate stock sentiment analysis with
precision and speed.

It combines two core capabilities: parsing recent
news headlines to extract market sentiment and insights, and parsing
SEC filings to surface key financial and risk information. Both
streams are fed into a configurable LLM pipeline, allowing you to run
fast local tests with lightweight models or perform high-accuracy
production analysis. Designed for modularity and reuse, it integrates
seamlessly into your workflows—turning raw data into actionable
insights without manual reading.

Github repo: [[https://github.com/dennyzhang/quantcodedenny.com/tree/main/tools/stock_sentiment][dennyzhang/quantcodedenny.com - tools/stock_sentiment]]
** 1 Setup env
- Install docker in your laptop
- Apply for GEMINI API KEY: https://aistudio.google.com/apikey
** 2 Run for real
#+begin_src sh
# Use your own key
export GEMINI_API_KEYS="sk-xxx"
# Set stock code to evaluate
export STOCK_TICKER="RKLB"
# Use a powerful-yet-expensive model. Default is gemini-1.5-flash
export GEMINI_MODEL="gemini-2.5-pro"
# Run capability via docker
docker run --rm \
  -e GEMINI_API_KEYS="$GEMINI_API_KEYS" \
  -e STOCK_TICKER="$STOCK_TICKER" \
  -e GEMINI_MODEL="$GEMINI_MODEL" \
  -v .:/app/ \
  denny/llm-stock-prompt
#+end_src

#+begin_example
2025-08-30 07:34:03,849 [INFO] llm_utils.py:19 - Using Gemini model: gemini-2.5-pro
2025-08-30 07:34:04,258 [INFO] sec_utils.py:65 - Fetching filing from https://www.sec.gov/Archives/edgar/data/1819994/000162828025038936/0001628280-25-038936.txt
2025-08-30 07:34:04,533 [INFO] sec_utils.py:68 - Successfully fetched filing for RKLB.
2025-08-30 07:34:04,539 [INFO] main.py:21 - Extracted SEC sections for RKLB (len=1313)
2025-08-30 07:34:04,540 [INFO] main.py:28 - Generating SEC sentiment for RKLB...
2025-08-30 07:34:29,914 [INFO] main.py:32 - Generating headlines sentiment for RKLB...
2025-08-30 07:34:51,624 [INFO] main.py:52 - === RKLB ===

Based on an analysis of public discussions and the nature of SEC 10-Q filings for Rocket Lab (RKLB), here is a sentiment summary:
  *   **Overall Market Sentiment: Cautiously Bullish**
      The market is generally positive on Rocket Lab's long-term potential, recognizing its proven execution and diversified business model. However, this optimism is tempered by the capital-intensive nature of new rocket development and the company's current lack of profitability. The sentiment hinges on future execution rather than current financials.
  
  *   **Top 3 Sentiment Drivers:**
      1.  **Neutron Rocket Development:** Progress on the next-generation, reusable Neutron rocket is the single largest catalyst. Positive news on engine testing, manufacturing milestones, and development timelines drives bullish sentiment, as it promises access to a much larger and more lucrative launch market.
      2.  **Space Systems Growth:** The performance of the Space Systems division (satellite components, spacecraft manufacturing) is a critical driver. Strong, high-margin revenue growth in this segment diversifies the company away from launch-only risk and provides a clearer, nearer-term path to profitability.
      3.  **Financial Execution & Cash Burn:** SEC filings like the 10-Q are closely watched for revenue growth, gross margins, and cash burn. While losses are expected during this growth phase, investors are sensitive to the rate of cash consumption and management's commentary on the timeline to achieve positive cash flow.
  
  *   **Suggested Action for a Long-Term Tech Investor: Watch**
      Monitor progress on the key drivers listed above, particularly Neutron development milestones and margin improvement in the Space Systems segment. A consistent track record of hitting development targets would be a strong signal to initiate or add to a position.
  
  Based on an analysis of recent news, social media discussions, and the provided SEC filing information for Rocket Lab (RKLB) over the past week:
  
  *   **SEC Filing Note:** The provided SEC filing (`0001628280-25-038936.txt`) is a 10-Q for the period ending June 30, **2025**. As this is a future-dated document, its contents cannot be used for an analysis of current events and are disregarded in this summary.
  
  ***
  
  ### **RKLB Analysis: Past Week**
  
  *   **Overall Sentiment: Bullish**
      *   Discussions reflect strong optimism about the company's long-term trajectory, focusing on execution and future growth catalysts, despite broader market volatility.
  
  *   **Top 3 Reasons Driving Sentiment:**
      1.  **Neutron Rocket Development Progress:** Continued tangible progress on the Neutron rocket, including updates on the Archimedes engine, tank production, and launch site construction in Wallops, Virginia, is the primary driver of long-term bullish sentiment. This progress reinforces confidence in the company's ability to compete in the medium and heavy-lift launch market.
      2.  **Consistent Execution & Launch Cadence:** Rocket Lab maintains a high flight tempo with its Electron rocket, successfully completing missions for customers like NASA. This operational success generates consistent revenue and demonstrates reliability, which is frequently highlighted as a key differentiator.
      3.  **Expansion of Space Systems Segment:** The market is increasingly recognizing the strength of Rocket Lab's Space Systems division, which provides satellite components and manufacturing. Recent contract wins and a growing backlog in this segment showcase a diversified and resilient business model beyond just launch services.
  *   **Suggested Action for a Long-Term Tech Investor: Buy**
     *   The company is executing on its core business while making clear, verifiable progress on its next-generation platform (Neutron) that promises significant growth. For a long-term investor with a tolerance for the high-growth space sector, current price levels are viewed by many as an attractive entry or accumulation point before major catalysts like the first Neutron launch are realized.  
#+end_example
** 3 [Optional] Local CI/CD
#+begin_src sh
# Run unit test
make test

# Function test: sec filing parse only
make run-sec

# Function test: llm prompt only
make run-llm

# Function test: all
make run-all
#+end_src
* Use AI For Covered Options
:PROPERTIES:
:EXPORT_FILE_NAME: coverged-option-with-ai
:EXPORT_DATE: 2025-10-18
:END:
URL: https://quantcodedenny.com/posts/coverged-option-with-ai
** Goal
Make covered calls and cash-secured puts more disciplined using AI — not by theory, but through small automations that prevent recurring mistakes and simplify reflection.

** 1. Common Mistakes And How AI Can Help

*** Mistake 1: Selling strikes too close to the money
- *Problem:* High chance of assignment, small downside cushion.  
- *AI Tips:*
  1. Ask AI to calculate delta or probability of ITM before trade.  
     Example prompt:  
     #+begin_quote
     For RKLB at $5.1, what is the strike with ~25 delta and <30% assignment risk for next Friday?
     #+end_quote
  2. Build a sheet formula =`IF(delta>0.35,"Too close","OK")` and let AI review results weekly.  
  3. Ask AI to cluster past trades by delta and identify ROI vs assignment rate trend.

*** Mistake 2: Ignoring earnings or news events
- *Problem:* Premium looks great but hidden risk of sudden drop.  
- *AI Tips:*
  1. Use AI plugin or calendar script to check earnings automatically — e.g., `=AI("Is SOFI reporting next 10 days?")`.  
  2. Before trade, ask AI:
     #+begin_quote
     Is there any upcoming earnings, major macro event, or SEC filing risk for this ticker?
     #+end_quote
  3. AI highlights risk with context, not just yes/no (e.g., “Earnings on 10/24, implied move ±11%, avoid short options.”).

*** Mistake 3: Overconcentration in correlated tickers
- *Problem:* Selling options in correlated names (SOFI, HOOD, AFRM).  
- *AI Tips:*
  1. Paste your open tickers into AI:  
     #+begin_quote
     These are my open option tickers: [SOFI, HOOD, AFRM].  
     Which ones are highly correlated and how should I diversify?
     #+end_quote
  2. AI outputs a correlation heatmap or simple group tag (Fintech cluster 0.8 correlation).  
  3. Update your sheet to color cells when same sector repeats.

*** Mistake 4: Rolling too late
- *Problem:* Miss chance to capture remaining theta efficiently.  
- *AI Tips:*
  1. In your sheet, track “% of premium captured”.  
     Example formula: `=(original_premium - current_price) / original_premium`.  
  2. Ask AI weekly:
     #+begin_quote
     Which of my covered calls have >80% premium captured but not yet closed?  
     Suggest roll strikes and expiries.
     #+end_quote
  3. AI returns actionable list like “Roll RKLB 5.5C→6C, next Friday, net credit $0.05.”

*** Mistake 5: Emotional reaction after assignment
- *Problem:* Breaking strategy consistency after stock is called away.  
- *AI Tips:*
  1. Log each assigned trade in sheet with emotion tag (“panic”, “neutral”, “calm”).  
  2. Ask AI monthly:
     #+begin_quote
     Review my post-assignment actions. When did I overtrade or break my rule?
     #+end_quote
  3. AI summarizes triggers (“You tend to rebuy too early after loss weeks; set cooling period = 2 days.”).

** 2. Enforcing Best Practices With AI

*** Practice 1: Always use a trade template
- Define: strike delta range, duration (7–14 days), and profit target (≥80% capture).
- AI Enforcer:
  - Use LLM to validate each trade plan:  
    #+begin_quote
    Check if this SOFI CSP (strike 6, expiry 10/25, delta 0.28, premium $0.12) fits my trade template (delta <0.3, no earnings, ROI >1.5%/week).
    #+end_quote
  - AI replies “✅ Matches template” or “⚠ ROI low, consider 2-week expiry.”

*** Practice 2: Keep one master spreadsheet for all trades
- Columns: `Date | Ticker | Type | Strike | Expiry | Premium | ROI | Delta | IV% | Status | Notes`
- AI Integration:
  - Use =AI() plugin or ChatGPT CSV upload for weekly review.
  - Example prompt:  
    #+begin_quote
    Analyze this CSV.  
    - Highlight trades breaking my template.  
    - Show top 3 with best annualized ROI.  
    - Suggest any adjustment to strike or expiry rules.
    #+end_quote
  - Keep Org note link `[[file:trades.xlsx][Master Trade Sheet]]`.

*** Practice 3: Automate pre-trade checklist
- Create checklist (liquidity, earnings, IV rank, margin, diversification).  
- AI bot runs it for you when you paste a ticker:
  #+begin_quote
  Check SOFI for covered call suitability this week.
  #+end_quote
  AI responds with a “go/no-go” summary (e.g., “✅ liquidity OK, ⚠ earnings soon, ❌ overexposed fintech sector”).

*** Practice 4: Enforce review loop
- Each weekend, ask:
  #+begin_quote
  From my trade history, what mistakes repeated this week?  
  How could I change my entry rules to reduce those?
  #+end_quote
- AI identifies pattern drift and suggests measurable tweaks.

** 3. Spreadsheet Integration
To avoid duplication:
1. Keep **all trading data** in Google Sheets or Excel.  
2. Let AI read or export the sheet (via CSV).  
3. Use consistent column headers; AI can parse them easily.  
4. Add formulas AI can interpret directly:
   - `% Premium Captured`  
   - `Annualized ROI`  
   - `Earnings Within 10 Days`  
   - `IV Rank`  
5. Sample compatible header:
   | Date | Ticker | Strategy | Strike | Expiry | Premium | ROI% | Delta | IV% | Status | Emotion | Notes |
6. Optional: create one hidden sheet “AI Summary” where ChatGPT output is pasted after each review.

** 4. Reflection Made Easy
Manual journaling is hard — make it frictionless with AI:
1. Each week, export your sheet (CSV).  
2. Ask AI:
   #+begin_quote
   Summarize this week’s covered options.  
   - What trades deviated from my rules?  
   - What emotions influenced bad decisions?  
   - Suggest one process improvement for next week.
   #+end_quote
3. Copy AI’s summary under “Weekly Reflection” section below.  
4. Keep cumulative learning by week (AI writes 2–3 bullets each time).

*** Weekly Reflection Log
- 2025-10-18: Strikes mostly within delta 0.25–0.3 ✅. Need auto alert for earnings week.  
- 2025-10-25: Two CSPs overlapped fintech sector. Add correlation check next week.  

** 5. Continuous AI Improvement Prompt
#+BEGIN_SRC prompt
You are my trading co-pilot.
Review my "Use AI For Covered Options" org file and the linked spreadsheet.
Suggest:
1. What data columns or formulas are missing to automate ROI/risk analysis.
2. How to enhance AI prompts for faster decision-making.
3. Any better reflection structure for habit building.
#+END_SRC

* #  --8<-------------------------- separator ------------------------>8-- :noexport:
* Caveats of using LLM for trading                                 :noexport:
** 市场不可预测，LLM可能miss黑天鹅
市场不可预测，LLM可能miss黑天鹅（如监管变化），或基于偏见数据给出skewed建议。建议：用multi-model ensemble（结合多个LLM），并验证来源。是否行动是follow-up（如你所说），但设置警报阈值（e.g., sentiment score > 0.7时通知）
* prompt - monitor HIMS stock                                      :noexport:
#+BEGIN_EXAMPLE
Evaluate the HIMS stock: ongoing trends, evaluations
#+END_EXAMPLE
* prompt - create latest news                                      :noexport:
:PROPERTIES:
:EXPORT_FILE_NAME: stock-create-latest-news
:EXPORT_DATE: 2025-08-25
:END:
#+BEGIN_EXAMPLE
Given a stock code, find all latest discussion for the past two weeks.

Find information from below sources
- X
- Facebook
- Reddit groups

Output:
- Generate a summary for the potential of this stock
- Highlight the latest news and progress
#+END_EXAMPLE
* prompt - monitor HIMS stock                                      :noexport:
:PROPERTIES:
:EXPORT_FILE_NAME: monitor-hims-stock
:EXPORT_DATE: 2025-08-25
:END:
#+BEGIN_EXAMPLE
Evaluate the HIMS stock: ongoing trends, evaluations
#+END_EXAMPLE
* Build and Reuse LLM Prompts to Decode High-Tech Stock Trends Fast. :noexport:
:PROPERTIES:
:EXPORT_FILE_NAME: llm-prompt-high-tech
:EXPORT_DATE: 2025-08-25
:END:

Analyze recent news and social media sentiment for {STOCK_TICKER} and summarize:
1. Overall sentiment (Bullish / Neutral / Bearish)
2. Top 3 reasons driving this sentiment
3. Suggested action for a long-term tech investor (watch / buy / sell)
Output as a concise bullet list.
* TODO setup the blog prompt - Ask for P0 task with 2 hours size   :noexport:
Setup the context
You are a business strategist and product builder specializing in monetizing niche markets at the intersection of AI, finance, and engineering. Focus on LLM Quant for indie engineers/long-term traders. 

Ask for P0 task
I have 2 hours now. I want to create one reusable content or tool in this topic. What I shall work on?  I need one sentence statement. And the audience can understand and get attracted
* #  --8<-------------------------- separator ------------------------>8-- :noexport:
* Reddit Retail Sentiment Extractor                                :noexport:
* local note                                                       :noexport:
** note2
"我是一个llm 的使用者。是一个infra engineer, 同时喜欢股票研究。我想构建ai bot来提高工作效率和股票投资收益

去github找相关有效的prompt给我使用"
** note1
"股票分析：

你是一个专业的美股投资分析师。请对股票 [输入股票代码/名称] 做全面分析，并按照以下结构输出：

1. **公司概况**
   - 行业与细分市场
   - 核心业务和产品线
   - 客户群体和市场覆盖范围
   - 核心护城河（品牌、技术、客户黏性等）

2. **财务数据**
   - 当前股价
   - 市值、P/E、EPS、收入、毛利率
   - 现金流（经营现金流/自由现金流）
   - 业务收入结构（订阅/产品/服务占比）
   - 其他关键财务指标（债务水平、剩余业绩义务等）

3. **行业与竞争分析**
   - 行业龙头地位
   - 主要竞争对手及比较
   - 行业周期性与趋势
   - 技术或市场护城河分析

4. **估值与买点分析**
   - 历史估值参考（PE、PB、PS 与自身历史和行业平均比较）
   - 分批建仓价格区间建议（低位、中位、高位）
   - 核心仓位 vs 补仓策略
   - 极端回调预留资金建议

5. **风险分析**
   - 宏观经济与政策风险
   - 行业与竞争风险
   - 公司战略或高管风险
   - 估值或短期股价波动风险

6. **投资建议总结**
   - 是否符合“稳健 Buy-the-Dip”标准
   - 长期持有逻辑
   - 建议核心仓与机会仓比例
   - 需要重点关注的财报/事件/数据点

请按照上述结构完整分析，提供尽可能具体的数据和逻辑说明。请在每个部分标明来源或数据年份。"


