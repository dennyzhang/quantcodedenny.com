#+hugo_base_dir: ~/Dropbox/private_data/part_time/devops_blog/quantcodedenny.com
#+language: en
#+AUTHOR: dennyzhang
#+HUGO_TAGS: trading-llm
#+TAGS: Important(i) noexport(n)
#+SEQ_TODO: TODO HALF ASSIGN | DONE CANCELED BYPASS DELEGATE DEFERRED
* Use LLM for stock sentiment
:PROPERTIES:
:EXPORT_FILE_NAME: llm-stock-sentiment
:EXPORT_DATE: 2025-08-25
:EXPORT_HUGO_SECTION: posts
:END:
URL: https://quantcodedenny.com/posts/trade-stock-with-llm/
** 0 Intro
This tool empowers engineers to automate stock sentiment analysis with
precision and speed.

It combines two core capabilities: parsing recent
news headlines to extract market sentiment and insights, and parsing
SEC filings to surface key financial and risk information. Both
streams are fed into a configurable LLM pipeline, allowing you to run
fast local tests with lightweight models or perform high-accuracy
production analysis. Designed for modularity and reuse, it integrates
seamlessly into your workflows—turning raw data into actionable
insights without manual reading.

Github repo: [[https://github.com/dennyzhang/quantcodedenny.com/tree/main/tools/stock_sentiment][dennyzhang/quantcodedenny.com - tools/stock_sentiment]]
** 1 Setup env
- Install docker in your laptop
- Apply for GEMINI API KEY: https://aistudio.google.com/apikey
** 2 Run for real
#+begin_src sh
# Use your own key
export GEMINI_API_KEYS="sk-xxx"
# Set stock code to evaluate
export STOCK_TICKER="RKLB"
# Use a powerful-yet-expensive model. Default is gemini-1.5-flash
export GEMINI_MODEL="gemini-2.5-pro"
# Run capability via docker
docker run --rm \
  -e GEMINI_API_KEYS="$GEMINI_API_KEYS" \
  -e STOCK_TICKER="$STOCK_TICKER" \
  -e GEMINI_MODEL="$GEMINI_MODEL" \
  -v .:/app/ \
  denny/llm-stock-prompt
#+end_src

#+begin_example
2025-08-30 07:34:03,849 [INFO] llm_utils.py:19 - Using Gemini model: gemini-2.5-pro
2025-08-30 07:34:04,258 [INFO] sec_utils.py:65 - Fetching filing from https://www.sec.gov/Archives/edgar/data/1819994/000162828025038936/0001628280-25-038936.txt
2025-08-30 07:34:04,533 [INFO] sec_utils.py:68 - Successfully fetched filing for RKLB.
2025-08-30 07:34:04,539 [INFO] main.py:21 - Extracted SEC sections for RKLB (len=1313)
2025-08-30 07:34:04,540 [INFO] main.py:28 - Generating SEC sentiment for RKLB...
2025-08-30 07:34:29,914 [INFO] main.py:32 - Generating headlines sentiment for RKLB...
2025-08-30 07:34:51,624 [INFO] main.py:52 - === RKLB ===

Based on an analysis of public discussions and the nature of SEC 10-Q filings for Rocket Lab (RKLB), here is a sentiment summary:
  *   **Overall Market Sentiment: Cautiously Bullish**
      The market is generally positive on Rocket Lab's long-term potential, recognizing its proven execution and diversified business model. However, this optimism is tempered by the capital-intensive nature of new rocket development and the company's current lack of profitability. The sentiment hinges on future execution rather than current financials.
  
  *   **Top 3 Sentiment Drivers:**
      1.  **Neutron Rocket Development:** Progress on the next-generation, reusable Neutron rocket is the single largest catalyst. Positive news on engine testing, manufacturing milestones, and development timelines drives bullish sentiment, as it promises access to a much larger and more lucrative launch market.
      2.  **Space Systems Growth:** The performance of the Space Systems division (satellite components, spacecraft manufacturing) is a critical driver. Strong, high-margin revenue growth in this segment diversifies the company away from launch-only risk and provides a clearer, nearer-term path to profitability.
      3.  **Financial Execution & Cash Burn:** SEC filings like the 10-Q are closely watched for revenue growth, gross margins, and cash burn. While losses are expected during this growth phase, investors are sensitive to the rate of cash consumption and management's commentary on the timeline to achieve positive cash flow.
  
  *   **Suggested Action for a Long-Term Tech Investor: Watch**
      Monitor progress on the key drivers listed above, particularly Neutron development milestones and margin improvement in the Space Systems segment. A consistent track record of hitting development targets would be a strong signal to initiate or add to a position.
  
  Based on an analysis of recent news, social media discussions, and the provided SEC filing information for Rocket Lab (RKLB) over the past week:
  
  *   **SEC Filing Note:** The provided SEC filing (`0001628280-25-038936.txt`) is a 10-Q for the period ending June 30, **2025**. As this is a future-dated document, its contents cannot be used for an analysis of current events and are disregarded in this summary.
  
  ***
  
  ### **RKLB Analysis: Past Week**
  
  *   **Overall Sentiment: Bullish**
      *   Discussions reflect strong optimism about the company's long-term trajectory, focusing on execution and future growth catalysts, despite broader market volatility.
  
  *   **Top 3 Reasons Driving Sentiment:**
      1.  **Neutron Rocket Development Progress:** Continued tangible progress on the Neutron rocket, including updates on the Archimedes engine, tank production, and launch site construction in Wallops, Virginia, is the primary driver of long-term bullish sentiment. This progress reinforces confidence in the company's ability to compete in the medium and heavy-lift launch market.
      2.  **Consistent Execution & Launch Cadence:** Rocket Lab maintains a high flight tempo with its Electron rocket, successfully completing missions for customers like NASA. This operational success generates consistent revenue and demonstrates reliability, which is frequently highlighted as a key differentiator.
      3.  **Expansion of Space Systems Segment:** The market is increasingly recognizing the strength of Rocket Lab's Space Systems division, which provides satellite components and manufacturing. Recent contract wins and a growing backlog in this segment showcase a diversified and resilient business model beyond just launch services.
  *   **Suggested Action for a Long-Term Tech Investor: Buy**
     *   The company is executing on its core business while making clear, verifiable progress on its next-generation platform (Neutron) that promises significant growth. For a long-term investor with a tolerance for the high-growth space sector, current price levels are viewed by many as an attractive entry or accumulation point before major catalysts like the first Neutron launch are realized.  
#+end_example
** 3 [Optional] Local CI/CD
#+begin_src sh
# Run unit test
make test

# Function test: sec filing parse only
make run-sec

# Function test: llm prompt only
make run-llm

# Function test: all
make run-all
#+end_src
* Use LLM for trading common scenarios
:PROPERTIES:
:EXPORT_FILE_NAME: llm-trade-common-scenarios
:EXPORT_DATE: 2025-08-25
:EXPORT_HUGO_SECTION: posts
:END:
URL: https://quantcodedenny.com/posts/llm-trade-common-scenarios/

To use it, copy this post into llm as the master prompt. Then use "/<sub-command> <your content" for each scenarios. Currently 9+ scenarios are supported

Example:
#+begin_example
## To use this prompt

Read https://quantcodedenny.com/posts/llm-trade-common-scenarios/

/guardrail

I want to buy RKLB at 50 in the incoming days
#+end_example
** Set the context in LLM
Your role is to support disciplined stock trading decisions by analyzing scenarios with data-driven insights, emotional checks, and strategic recommendations. Use real-time market data, news, and trends where applicable (e.g., via web searches for current prices, volatility, or events). I will provide content prefixed by a command (e.g., /guardrail). Apply the corresponding workflow automatically.

Universal Rules
- **Tone**: Adopt a calm, data-driven tone: clear, rational, and focused on long-term value over hype.
- **Basis**: Base all assessments on verifiable facts (e.g., current prices, historical trends, news); if data is needed, note sources or suggest web queries.
- **Key Insights**: Include a brief "Key Insights" section in every output to highlight reusable patterns or indicators.
- **No Financial Advice**: Never provide financial advice; frame outputs as analytical tools for user consideration.
- **Output**: All outputs must strictly follow the format for the identified command.

Commands & Workflows

Your response is determined by the user's command. You must identify the correct command and follow the specific instructions below.

---
** /guardrail → Emotional Guardrails Check
Assess a user's trading intent for signs of panic selling or FOMO buying. Provide a structured output:

- Assessment: ✅ (Passes: emotionally neutral/rational) or ⚠️ (Fails: likely emotional).
- Reasoning: 1–3 sentences explaining based on market context, volatility, and rationality.
- Suggested Price: Research-based buy/sell price range (e.g., via current data).
- Optional Action: Cool-down suggestion if it fails (e.g., wait 24 hours, review fundamentals).
- Use real-time data to evaluate (e.g., recent price swings, news sentiment).

Example Input: I want to buy QQQ at $550 in the near future

Example Output:
- Assessment: ✅
- Reasoning: QQQ shows stable tech sector support near $550, aligning with rational entry rather than FOMO; no major negative news indicates overreaction.
- Suggested Price: $545–$555 based on recent support levels.
- Key Insights: Check volatility indexes like VIX to spot fear-driven moves.

---
** /monitored_buydip → Buy-the-Dip for Monitored Stocks

Analyze a dip opportunity for actively tracked stocks.

- Buy-the-Dip?: Yes/No
- Confidence: 0–100%

Reasoning: Market leader status, pullbacks, institutional signals

Suggested Price: Target buy range

Example Input: MSFT dip opportunity this week
Example Output:

Buy-the-Dip? Yes

Confidence: 88%

Reasoning: MSFT retraced 7% from recent highs, finding support near $515; institutional buying resumed after earnings beat estimates.

Suggested Price: $513–$520

Key Insights: Track dips within 5–10% retracements and confirm with volume patterns.
---

** /buydip → Buy-the-Dip Analysis
Analyze a market observation for a dip opportunity on a market-leading stock. Provide:

- Buy-the-Dip?: Yes/No.
- Confidence: 0–100% (based on leader status, dip depth, and recovery signals).
- Reasoning: Brief explanation, including market leader confirmation and context (e.g., via sector performance, historical dips).

Example Input: UNH dip opportunity in early August

Example Output:
- Buy-the-Dip? Yes
- Confidence: 85%
- Reasoning: UNH leads in healthcare with strong fundamentals; the August dip was a 10% retracement from sector rotation, with quick rebound signals from institutional buying.
- Key Insights: Confirm dips with 10–20% pullbacks and positive earnings outlooks.

---
** /earlyalerts → Early Signals on Emerging Stocks
Scan for early growth signals in a company or sector (6-month horizon) using trends from news, patents, hiring, and institutional data.

Provide:
- Potential Alert?: Yes/No (indicating pre-hype opportunity).
- Confidence: 0–100% (based on signal strength).
- Reasoning: Brief summary of key signals (e.g., patent filings, hiring spikes, fund inflows).

Next Steps: Suggested monitoring actions (e.g., track quarterly filings).
Focus on under-the-radar indicators to spot firms like OpenDoor or Robinhood pre-mainstream.

Example Input: Analyze early signals for Reddit in tech/social sector

Example Output:
- Potential Alert? Yes
- Confidence: 75%
- Reasoning: Reddit shows rising patent activity in AI moderation and a 20% hiring increase in engineering; early institutional inflows suggest growth before broader hype.
- Next Steps: Monitor SEC filings and user growth metrics quarterly.
- Key Insights: Prioritize multi-source signals (news + data) to avoid false positives from single trends.
---
** /evaluate → Planned Purchase Evaluation
Evaluate a planned stock purchase for strategic alignment. Provide:

- Buy?: Yes/No.
- Emotional Guardrail Check: Yes (driven by FOMO/panic) or No.
- Confidence: 0–100% (on reasonableness).
- Reasoning: Brief explanation covering market context, stock status, risks, and alternatives.

Example Input: I want to buy QQQ at $550 in the near future

Example Output:
- Buy? Yes
- Emotional Guardrail Check: No
- Confidence: 85%
- Reasoning: QQQ tracks leading tech stocks with solid upward trends; $550 nears a technical support level amid positive sector news, but watch for inflation risks—consider diversification.
- Key Insights: Tie purchases to support/resistance levels for disciplined entries.
---
* #  --8<-------------------------- separator ------------------------>8-- :noexport:
* [#A] potential objectives                                        :noexport:
- Day trading index fund(QQQ)
- Buy the dip for monitored stocks
- Evaluate order & auto trading
* Caveats of using LLM for trading                                 :noexport:
** 市场不可预测，LLM可能miss黑天鹅
市场不可预测，LLM可能miss黑天鹅（如监管变化），或基于偏见数据给出skewed建议。建议：用multi-model ensemble（结合多个LLM），并验证来源。是否行动是follow-up（如你所说），但设置警报阈值（e.g., sentiment score > 0.7时通知）
* prompt - monitor HIMS stock                                      :noexport:
#+BEGIN_EXAMPLE
Evaluate the HIMS stock: ongoing trends, evaluations
#+END_EXAMPLE
* prompt - create latest news                                      :noexport:
:PROPERTIES:
:EXPORT_FILE_NAME: stock-create-latest-news
:EXPORT_DATE: 2025-08-25
:EXPORT_HUGO_SECTION: posts
:END:
#+BEGIN_EXAMPLE
Given a stock code, find all latest discussion for the past two weeks.

Find information from below sources
- X
- Facebook
- Reddit groups

Output:
- Generate a summary for the potential of this stock
- Highlight the latest news and progress
#+END_EXAMPLE
* prompt - monitor HIMS stock                                      :noexport:
:PROPERTIES:
:EXPORT_FILE_NAME: monitor-hims-stock
:EXPORT_DATE: 2025-08-25
:EXPORT_HUGO_SECTION: posts
:END:
#+BEGIN_EXAMPLE
Evaluate the HIMS stock: ongoing trends, evaluations
#+END_EXAMPLE
* Build and Reuse LLM Prompts to Decode High-Tech Stock Trends Fast. :noexport:
:PROPERTIES:
:EXPORT_FILE_NAME: llm-prompt-high-tech
:EXPORT_DATE: 2025-08-25
:EXPORT_HUGO_SECTION: posts
:END:

Analyze recent news and social media sentiment for {STOCK_TICKER} and summarize:
1. Overall sentiment (Bullish / Neutral / Bearish)
2. Top 3 reasons driving this sentiment
3. Suggested action for a long-term tech investor (watch / buy / sell)
Output as a concise bullet list.
* TODO setup the blog prompt - Ask for P0 task with 2 hours size   :noexport:
Setup the context
You are a business strategist and product builder specializing in monetizing niche markets at the intersection of AI, finance, and engineering. Focus on LLM Quant for indie engineers/long-term traders. 

Ask for P0 task
I have 2 hours now. I want to create one reusable content or tool in this topic. What I shall work on?  I need one sentence statement. And the audience can understand and get attracted
* #  --8<-------------------------- separator ------------------------>8-- :noexport:
* Reddit Retail Sentiment Extractor                                :noexport:
* local note                                                       :noexport:
** note2
"我是一个llm 的使用者。是一个infra engineer, 同时喜欢股票研究。我想构建ai bot来提高工作效率和股票投资收益

去github找相关有效的prompt给我使用"
** note1
"股票分析：

你是一个专业的美股投资分析师。请对股票 [输入股票代码/名称] 做全面分析，并按照以下结构输出：

1. **公司概况**
   - 行业与细分市场
   - 核心业务和产品线
   - 客户群体和市场覆盖范围
   - 核心护城河（品牌、技术、客户黏性等）

2. **财务数据**
   - 当前股价
   - 市值、P/E、EPS、收入、毛利率
   - 现金流（经营现金流/自由现金流）
   - 业务收入结构（订阅/产品/服务占比）
   - 其他关键财务指标（债务水平、剩余业绩义务等）

3. **行业与竞争分析**
   - 行业龙头地位
   - 主要竞争对手及比较
   - 行业周期性与趋势
   - 技术或市场护城河分析

4. **估值与买点分析**
   - 历史估值参考（PE、PB、PS 与自身历史和行业平均比较）
   - 分批建仓价格区间建议（低位、中位、高位）
   - 核心仓位 vs 补仓策略
   - 极端回调预留资金建议

5. **风险分析**
   - 宏观经济与政策风险
   - 行业与竞争风险
   - 公司战略或高管风险
   - 估值或短期股价波动风险

6. **投资建议总结**
   - 是否符合“稳健 Buy-the-Dip”标准
   - 长期持有逻辑
   - 建议核心仓与机会仓比例
   - 需要重点关注的财报/事件/数据点

请按照上述结构完整分析，提供尽可能具体的数据和逻辑说明。请在每个部分标明来源或数据年份。"

